<!DOCTYPE html>
<html lang="pl">
<head>
  <title>React at 60 FPS - Optimizing React</title>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="shower/themes/ribbon/styles/screen-16x10.css">

  <style type="text/css">
    .wrap {
      width: 100%;
      margin: 0 auto;
      height: 70%;
    }

    .left_col {
      float: left;
      width: 50%;
      height: 100%;
    }

    .right_col {
      float: right;
      width: 50%;
      height: 100%;
    }

    .slide .shout {
      font-size: 140px;
    }

    .slide {
      padding-top: 40px;
      background-color: # #FFF;
    }

    .slide .shout {
      font-size: 72px;
      font-weight: bold;
    }

    :not(pre) > code[class*="language-"], pre[class*="language-"] {
      background: #f5f2f0;
      border: solid;
    }

    .slide b, .slide strong {
      color: #bd1110;
    }

    .slide p.note {
      color: #12335f;
    }

    .slide h2 {
      color: #393535;
      font-weight: bold;
      font-family: firalight, sans-serif;
    }

    .slide::after {
      display: none;
    }

    .cover h2 {
      margin: 320px 0 0;
      color: #FFF;
      text-align: center;
      font-size: 70px;
    }

    .cover p {
      margin: 10px 0 0;
      text-align: center;
      color: #FFF;
      font-style: italic;
      font-size: 20px;
    }

    .cover p a {
      color: #FFF;
    }

    .img_slide h2 {
      margin: 120px 0 0;
      color: #FFF;
      text-align: center;
      font-size: 170px;
    }

    .slide .cover {
      width: 100%;
      height: 100%;
    }

    .slide ol li, .slide ul li {
      font-size: 32px;
    }
  </style>
</head>
<body class="shower list">
<header class="caption">
  <h1>React at 60 FPS - Optimizing React</h1>
</header>

<!-- SLIDE #1 -->
<section style="padding-right: 40px;" class="slide front-page">
  <div class="details">
    <!-- 1. Avatar -->
    <img src="pictures/avatar.jpg" alt="Speaker"/>

    <!-- 2. Speaker -->
    <h2 style="display: inline;margin-left: 30px;font-size: 72px;">Kamil Grabek</h2>

    <!-- 3. Presentation title -->
    <h3 style="padding-top: 20px;"><strong>"React at 60 FPS - Optimizing React"</strong></h3>

    <!-- 4. Presentation date -->
    <h3>2018-11-28</h3>

    <!-- 5. Contact the speaker -->
    <img src="pictures/brt-logo.png" />
    <h3>github.com/G3F4</h3>
    <h3>kamil.grabek@gmail.com</h3>
  </div>
</section>

<!-- SLIDE #2 -->
<!--    <section class="slide" itemscope style="font-weight: bold;">
        <div>
            <h2>Who am I?</h2>

            <h3 itemprop="jobTitle">Front-end developer</h3>

            <p>
                <span itemprop="knows">Tech freak, sci-fi lover, astro maniac.</span><br/>
            </p>

            <div class="wrap">
                <div class="left_col">
                    <p class="note">"Kiedy życie zaskoczy,<br />pytam co ma dla mnie jeszcze"</p>
                </div>
            </div>
        </div>
    </section>-->

<!-- SLIDE #3 -->
	<section class="slide cover">
		<h2>REACT AT 60 FPS OPTIMIZING REACT</h2>
		<p>By <a href="https://github.com/g3f4">Kamil Grabek</a></p>
		<img src="pictures/train.jpg" alt="" class="cover">
	</section>

<!-- SLIDE #4 -->
<section class="slide">
  <h2 style="font-size: 48px; font-weight: 900">IS REACT FAST OUT OF THE BOX?</h2>
  <div class="wrap">
    <div class="left_col" style="width: 70%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 15px;">
        <li class="next">VIRTUAL DOM</li>
        <li class="next">SLOWER THAN NATIVE JAVASCRIPT?</li>
        <li class="next">SLOWER THAN JQUERY?</li>
        <li class="next">MATTER OF UPDATES</li>
      </ul>
    </div>
    <div class="right_col" style="width: 30%; margin-top: 50px;">
      <img style="width: 300px; height: 300px;" src="pictures/box.png">
    </div>
  </div>
</section>

<section class="slide">
  <h2 style="display: none;">Unoptimized application</h2>
  <div style="text-align: center; font-size: 100px;">
    <a style="color:#000;" href="http://g3f4.xyz/optimizing-react/unoptimized/">UNOPTIMIZED APPLICATION</a>
  </div>
</section>

<!-- SLIDE #7 -->
<section class="slide img_slide">
  <h2 style="margin: 435px 0 0;font-size: 100px;color: rgb(255, 255, 255);">RECONCILIATION</h2>
  <img src="pictures/fractal.jpg" alt="" class="cover">
</section>

<section class="slide img_slide">
  <h2 style="margin: 20px 0 0;font-size: 42px;color: rgb(39, 12, 12);">WHAT CHANGED?</h2>
  <img src="pictures/reconcillation1.jpg" alt="" class="cover">
</section>

<section class="slide img_slide">
  <h2 style="margin: 20px 0 0;font-size: 42px;color: rgb(39, 12, 12);">WHAT REACT WOULD NORMALLY DO?</h2>
  <img src="pictures/reconcillation2.jpg" alt="" class="cover">
</section>

<section class="slide img_slide">
  <h2 style="margin: 20px 0 0;font-size: 42px;color: rgb(39, 12, 12);">WHAT REACT SHOULD DO?</h2>
  <img src="pictures/reconcillation3.jpg" alt="" class="cover">
</section>

<!-- SLIDE #5 -->
<section class="slide">
  <h2>WHAT IS OUR GOAL OPTIMIZATION</h2>
  <div class="wrap">
    <div class="left_col" style="width: 40%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/goal.png">
    </div>
    <div class="right_col" style="width: 60%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">FLUID ANIMATIONS</li>
        <li class="next">FAST FORMS</li>
        <li class="next">60 FPS</li>
      </ul>
    </div>
  </div>
</section>

<!-- SLIDE #6 -->
<section class="slide">
  <h2>WHEN START OPTIMIZATION</h2>
  <div class="wrap">
    <div class="left_col" style="width: 70%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">NOT AT THE BEGINNING</li>
        <li class="next">WHEN SLOWER DEVICES MATTER</li>
        <li class="next">ENCOUNTERING BOTTLE NECKS</li>
      </ul>
    </div>
    <div class="right_col" style="width: 30%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/start.png">
    </div>
  </div>
</section>

<!-- SLIDE #7 -->
<section class="slide img_slide">
  <h2 style="margin: 435px 0 0;font-size: 120px;color: rgb(39, 12, 12);">DIAGNOSTICS</h2>
  <img src="pictures/diagnostics.jpg" alt="" class="cover">
</section>

<!-- SLIDE #8 -->
<section class="slide">
  <h2>USING CONSOLE IN RENDER METHOD</h2>
  <pre style="height: 75%;font-size: 22px;width: 100%;" class="language-javascript">
            <code style="width: 100%;">    class MyComponent extends React.Component {
    ...
    render() {
      console.log(`Rendering ${this.constructor.name}`);
      return (
        < div>...< /div>
      );
    }
    ...
    }
            </code>
        </pre>
</section>

<!-- SLIDE #9 -->
<section class="slide">
  <h2>WHY-DID-YOU-UPDATE</h2>
  <img style="" src="pictures/why-did-you-update.png">
  <h3>https://github.com/garbles/why-did-you-update</h3>
</section>

<!-- SLIDE #10 -->
<section class="slide" style="padding-top: 40px;">
  <h2>REACT PERFORMANCE TOOLS</h2>
  <h3>WASTED OPERATIONS</h3>
  <img style="zoom: 1.2;" src="pictures/perf-wasted.png">
  <h3>TIME SPENT PROCESSING COMPONENTS</h3>
  <img style="zoom: 1.2;" src="pictures/perf-inclusive.png">
  <h3>DOM OPERATIONS PERFORMED</h3>
  <img style="zoom: 1.2;" src="pictures/perf-dom.png">
  <h3>https://facebook.github.io/react/docs/perf.html</h3>
</section>

<!-- SLIDE #11 -->
<section class="slide">
  <h2>PROFILING REACT APP</h2>
  <ul style="margin-bottom: 0px;font-size: 30px;font-weight: bold; margin-top: 0px;">
    <li class="next">SINCE REACT v16.5.* with React DevTools extension</li>
  </ul>
  <img class="next" style="" src="pictures/props-and-state.gif">
  <img class="next" style="" src="pictures/props-and-state.gif">
</section>

<!-- SLIDE #12 -->
<section class="slide img_slide">
  <h2 style="margin: 435px 0 0;font-size: 120px;color: rgb(39, 12, 12);">COMPOSITION</h2>
  <img src="pictures/blocks.png" alt="" class="cover" style="padding-bottom: 170px;padding-left: 70px;padding-right: 70px;padding-top: 20px;">
</section>

<!-- SLIDE #13 -->
<section class="slide">
  <h2>JSX AND COMPONENTS</h2>
  <div class="wrap">
    <div class="left_col" style="width: 70%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">CODE READABILITY</li>
        <li class="next">LIFECYCLE</li>
        <li class="next">CONTROLLING RENDER TREE</li>
      </ul>
    </div>
    <div class="right_col" style="width: 30%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/component.png">
    </div>
  </div>
</section>

<!-- SLIDE #14 -->
<section class="slide" style="padding-top: 30px;">
  <h2>MAKING TEMPLATES WRONG WAY</h2>
  <div class="wrap" style="margin-top: 30px;">
    <div class="left_col" style="width: 40%; margin-top: 50px;">
      <img style="width: 300px;height: 300px;margin-top: 40px;" src="pictures/icons/bad.png">
    </div>
    <div class="right_col" style="width: 60%;">
                <pre style="font-size: 22px;width: 100%;" class="language-javascript">
                    <code style="width: 100%;"> < div>
 {invitations.map(invitation => (
   < div
    key={invitation.id}
    < div>{invitation.number}< /div>
    ...
   />
 ))}
 < /div>
                  </code>
                </pre>
    </div>
  </div>
</section>

<!-- SLIDE #15 -->
<section class="slide" style="padding-top: 30px;">
  <h2>MAKING TEMPLATES GOOD WAY</h2>
  <div class="wrap" style="margin-top: 30px;">
    <div class="left_col" style="width: 65%;">
              <pre style="font-size: 22px;width: 100%;" class="language-javascript">
                <code style="width: 100%;"> < div>
 {invitations.map(invitation => (
   < Invitation
     key={invitation.id}
     {...getInvitationProps(invitation)}
   />
 ))}
 < /div>
                </code>
              </pre>
    </div>
    <div class="right_col" style="width: 35%; padding-left: 30px;">
      <img style="width: 300px;height: 300px;margin-top: 40px;" src="pictures/icons/good.png">
    </div>
  </div>
</section>

<!-- SLIDE #16 -->
<section class="slide">
  <h2>LIFECYCLE - UPDATING</h2>
  <div class="wrap">
    <div class="left_col" style="width: 60%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li>componentWillReceiveProps</li>
        <li>shouldComponentUpdate</li>
        <li>componentWillUpdate</li>
        <li>render</li>
        <li>componentDidUpdate</li>
      </ul>
    </div>
    <div class="right_col" style="width: 40%; margin-top: 60px;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/update.png">
    </div>
  </div>
</section>

<!-- SLIDE #17 -->
<section class="slide">
  <h2>shouldComponentUpdate</h2>
  <pre style="height: 83%;font-size: 22px;width: 100%;" class="language-javascript">
            <code style="width: 100%;"> class MyComponent extends React.Component {
   ...
   shouldComponentUpdate(nextPros, nextState) {
     const hasPropsChanged = shallowEqual(
                   nextProps,
                   this.props);
     const hasStateChanged = shallowEqual(
                   nextState,
                   this.state);
     return !hasPropsChanged && !hasStateChanged;
   }
   ...
 }
            </code>
        </pre>
</section>

<!-- SLIDE #17 -->
<section class="slide">
  <h2>PureComponent</h2>
  <pre style="height: 50%;font-size: 22px;width: 100%;" class="language-javascript">
            <code style="width: 100%;"> class MyComponent extends React.PureComponent {
   render() {
      ...
   }
 }
            </code>
        </pre>
</section>

<section class="slide">
  <h2 style="display: none;">Application with PureComponent</h2>
  <div style="text-align: center; font-size: 100px;">
    <a style="color:#000;"href="http://g3f4.xyz/optimizing-react/scu/">PureComponent App</a>
  </div>
</section>

<!-- SLIDE #18 -->
<section class="slide">
  <h2>HOW NOT TO USE IT</h2>
  <div class="wrap">
    <div class="left_col" style="width: 60%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">MUTATING STATE DIRECTLY</li>
        <li class="next">PROPS BINGING FUNCTIONS</li>
        <li class="next">DON'T USE EVERYWHERE</li>
      </ul>
    </div>
    <div class="right_col" style="width: 40%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/no.png">
    </div>
  </div>
</section>

<!-- SLIDE #19 -->
<section style="padding-left: 20px;padding-right: 20px;" class="slide img_slide">
  <h2 style="margin: -32px 0 0;font-size: 120px;color: rgb(39, 12, 12);">MUTABILITY VS</h2>
  <h2 style="margin: 370px 0 0;font-size: 120px;color: rgb(39, 12, 12);">IMMUTABILITY</h2>
  <img src="pictures/fight.jpg" alt="" class="cover">
</section>

<!-- SLIDE #20 -->
<section class="slide">
  <h2>MUTABLE STRUCTURES AND REACT</h2>
  <div class="wrap">
    <div class="left_col" style="width: 60%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">IT'S HARD TO DETERMINE WHAT HAVE CHANGED</li>
        <li class="next">ASSERTING DEEP STRUCTURES IS EXPENSIVE</li>
        <li class="next">USING REFERENCES CAN LEAD TO ERRORS</li>
      </ul>
    </div>
    <div class="right_col" style="width: 40%; margin-top: 50px;">
      <img style="width: 300px; height: 300px; margin-left: 40px;" src="pictures/icons/mutable.png">
    </div>
  </div>
</section>

<!-- SLIDE #21 -->
<section class="slide">
  <h2>WHY IMMUTABLE STRUCTURES</h2>
  <div class="wrap">
    <div class="left_col" style="width: 45%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/clone.png">
    </div>
    <div class="right_col" style="width: 55%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">STATE IS READ-ONLY</li>
        <li class="next">UPDATING STATE CREATE NEW STATE</li>
        <li class="next">SIMPLER BUGS TRACING</li>
        <li class="next">STATE HISTORY</li>
      </ul>
    </div>
  </div>
</section>

<!-- SLIDE #22 -->
<section class="slide">
  <h2>immutability-helper</h2>
  <ul style="font-size: 35px;font-weight: bold;">
    <li class="next">OPTIMIZE UPDATE</li>
    <li class="next">SYNTACTIC SUGAR</li>
  </ul>
  <pre style="font-size: 24px;width: 100%;" class="next language-javascript">
            <code style="width: 100%;"> import update from 'immutability-helper';
  const newData = update(myData, {
    x: { y: {z: { $set: 7 } } },
    a: { b: { $push: [9] } }
  });
            </code>
        </pre>
</section>

<!-- SLIDE #23 -->
<section class="slide">
  <h2>Immutable.js</h2>
  <ul style="font-size: 35px;font-weight: bold;">
    <li class="next">Ready to use immutable structures</li>
    <li class="next">https://facebook.github.io/immutable-js/</li>
  </ul>
  <pre style="font-size: 24px;width: 100%;" class="next language-javascript">
            <code style="width: 100%;"> const list = Immutable.List.of('apple');
 const newList = list.push('banana');
            </code>
        </pre>
</section>

<!-- SLIDE #24 -->
<section style="padding-left: 20px;padding-right: 20px;" class="slide img_slide">
  <h2 style="margin: 370px 0 0;font-size: 120px;color: #FFF;">MEMOIZATION</h2>
  <img src="pictures/photos.jpg" alt="" class="cover">
</section>

<!-- SLIDE #25 -->
<section class="slide">
  <h2>WHAT IS MEMOIZATION?</h2>
  <div class="wrap">
    <div class="left_col" style="width: 70%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">FUNCTION WITH CACHE</li>
        <li class="next">TIME-SPACE TRADE-OFF</li>
        <li class="next">REFERENTIAL TRANSPARENCY(PURE)</li>
      </ul>
    </div>
    <div class="right_col" style="width: 30%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/memory.png">
    </div>
  </div>
</section>

<!-- SLIDE #26 -->
<section class="slide">
  <h2>MOIZE</h2>
  <h3>https://www.npmjs.com/package/moize</h3>
  <pre style="height: 74%;font-size: 24px;width: 100%;" class="next language-javascript">
        <code style="width: 100%;">  import moize from 'moize';

  const method = (a, b) => {
    return a + b;
  };

  const memoized = moize(method);
  memoized(2, 4); // 6
  memoized(2, 4); // 6, pulled from cache
        </code>
      </pre>
</section>


<!-- SLIDE #27 -->
<section class="slide">
  <h2>MOIZE AND REACT</h2>
  <div class="wrap">
    <div class="left_col" style="width: 70%;">
          <pre style="height: 118%;font-size: 24px;width: 100%;" class="next language-javascript">
            <code style="width: 100%;">  import moize from 'moize';

  const Foo = ({bar, baz}) => {
    return (
      < div>
        {bar} {baz}
      < /div>
    );
  };
  export default moize.react(Foo);
            </code>
          </pre>
    </div>
    <div class="right_col" style="width: 30%; margin-top: 80px;">
      <img style="width: 300px; height: 300px;" src="pictures/logo/react.png">
    </div>
  </div>
</section>

<!-- SLIDE #27 -->
<section class="slide">
  <h2>React.Memo</h2>
  <ul style="margin-bottom: 0px;font-size: 30px;font-weight: bold; margin-top: 0px;">
    <li class="next">SINCE REACT v16.6.*</li>
  </ul>
  <div class="wrap">
          <pre style="height: 38%;font-size: 24px;width: 100%;" class="next language-javascript">
            <code style="width: 100%;"> const Component = React.memo((props) => {
    /* only rerenders if props change */
 });
            </code>
          </pre>
    </div>
</section>

<section class="slide">
  <h2 style="display: none;">Pure and memoized App</h2>
  <div style="margin-top: -40px;text-align: center; font-size: 100px;">
    <a style="color:#000;"href="http://g3f4.xyz/optimizing-react/memoized/">
      Pure and memoized application
    </a>
  </div>
</section>

<!-- SLIDE #28 -->
<section class="slide">
  <h2>WHAT MORE?</h2>
  <div class="wrap">
    <div class="left_col" style="width: 74%;">
      <ul style="font-size: 35px;font-weight: bold;">
        <li class="next">REMEMBER ABOUT PRODUCTION  BUILD</li>
        <li class="next">WEBPACK  PLUGINS</li>
        <ul style="font-size: 30px;font-weight:  bold;">
          <li class="next">REUSABLE CONSTANT REACT  ELEMENTS</li>
          <li class="next">INLINE REACT  ELEMENTS</li>
        </ul>
        <li class="next">REACT  ALTERNATIVES</li>
        <ul style="font-size: 30px;font-weight:  bold;">
          <li class="next">PREACT (3kb )</li>
          <li class="next">INFERNO (9kb )</li>
        </ul>
      </ul>
    </div>
    <div class="right_col" style="width: 26%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/brainbulb.png">
    </div>
  </div>
</section>

<!-- SLIDE #29 -->
<section class="slide">
  <h2>FINAL THOUGHTS</h2>
  <div class="wrap">
    <div class="left_col" style="width: 70%;">
      <ul style="font-size: 35px;font-weight: bold; margin-top: 25px;">
        <li class="next">DON'T OPTIMIZE PREMATURELY</li>
        <li class="next">RENDER LOGIC COSTS TIME</li>
        <li class="next">USE IMMUTABLE STRUCTURES AND PURE FUNCTIONS</li>
      </ul>
    </div>
    <div class="right_col" style="width: 30%;">
      <img style="width: 300px; height: 300px;" src="pictures/icons/thought.png">
    </div>
  </div>
</section>

<!-- SLIDE #RESOURCES -->
<section class="slide">
  <h2>RESOURCES</h2>
  <ul style="font-size: 14px;">
    <li>http://g3f4.xyz/optimizing-react/ (Demo app)</li>
    <li>https://github.com/G3F4/optimizing-react (Demo code)</li>
    <li>https://www.npmjs.com/package/immutability-helper</li>
    <li>https://www.npmjs.com/package/moize</li>
    <li>https://facebook.github.io/react/docs/ (React documentation)</li>
    <li>https://reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html(Profiling post)</li>
    <li>https://www.accelebrate.com/blog/the-real-benefits-of-the-virtual-dom-in-react-js/</li>
    <li>https://github.com/facebook/react/issues/3228 (Inline ReactElements)</li>
    <li>https://github.com/facebook/react/issues/3226 (Reuse Constant Value Types like ReactElement)</li>
    <li>https://github.com/infernojs/inferno</li>
    <li>https://www.toptal.com/react/optimizing-react-performance</li>
  </ul>
</section>

<!-- SLIDE #LAST -->
<section class="slide">
  <img src="pictures/brt-logo.png" />
  <h1 class="shout">THANKS FOR<br/>LISTENING. QUESTIONS?</h1>
</section>

<div class="progress"></div>

<script src="shower/shower.min.js"></script>
<!-- Copyright © 2018 Kamil Grabek -->
</body>
</html>
